webpackJsonp([6],{xJsL:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={data:function(){return{user:{username:"",password:"",role:""}}},methods:{login:function(){var e=this,r={username:e.user.username,password:e.user.password},t="";if(console.log("role: "+e.user.role),"Admin"==e.user.role)t="admin";else if("Staff"==e.user.role)t="staffs";else{if("Driver"!=e.user.role)return void console.log("Role error");t="driver"}""!=e.username&&""!=e.password&&(e.loading=!0,e.$axios.post(e.$myStore.state.wepAPI.url+t+"/login/",r).then(function(r){console.log(r.data),e.$myStore.state.user.username=r.data.username,e.$myStore.state.user.password=e.user.password,e.$myStore.state.user.fullname=r.data.fullname,e.$myStore.state.user.access_token=r.data.access_token,e.$myStore.state.user.refresh_token=r.data.refresh_token,e.$myStore.state.user.role=t,"Driver"==e.user.role?e.$myStore.state.user.phone=r.data.phone:e.$myStore.state.user.staff_role=r.data.role,console.log(e.$myStore.state.user),e.$router.push("/"+t)}).catch(function(r){e.loading=!1,console.log(r)}))}}},a={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-container",{attrs:{fluid:""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}},[t("h1",[e._v("Sign In")])]),e._v(" "),t("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":"","mt-3":""}},[t("v-layout",{attrs:{column:""}},[t("v-flex",[t("v-text-field",{attrs:{placeholder:"Username",id:"username",type:"text",required:""},model:{value:e.user.username,callback:function(r){e.$set(e.user,"username",r)},expression:"user.username"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{label:"Password",id:"password",type:"password",required:""},model:{value:e.user.password,callback:function(r){e.$set(e.user,"password",r)},expression:"user.password"}})],1),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.user.role,expression:"user.role"}],on:{change:function(r){var t=Array.prototype.filter.call(r.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.user,"role",r.target.multiple?t:t[0])}}},[t("option",{attrs:{disabled:"",value:""}},[e._v("Please select role")]),e._v(" "),t("option",[e._v("Admin")]),e._v(" "),t("option",[e._v("Staff")]),e._v(" "),t("option",[e._v("Driver")])]),e._v(" "),t("v-flex",{staticClass:"text-xs-center",attrs:{"mt-5":""}},[t("v-btn",{attrs:{color:"primary",type:"submit"},on:{click:e.login}},[e._v("Sign In")])],1)],1)],1)],1)],1)},staticRenderFns:[]},o=t("VU/8")(s,a,!1,null,null,null);r.default=o.exports}});
//# sourceMappingURL=6.9afc4f70e901bcef58bf.js.map